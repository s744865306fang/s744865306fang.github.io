<!doctype html public "-//W3C//DTD HTML 3.2//EN">

<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<meta http-equiv="Content-Language" content="zh-cn">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<link rel="stylesheet" type="text/css" href="../global.css">
<title>比较指令</title>
</head>

<body TopMargin=0 bgcolor="#f0f0f0" text="#000000" link="#0022dd" vlink="#002288">
<!-- embest help header -->
    <img src="../arm.gif" width=778 height=73 border=0>
    <!-- embest help header -->
    
<table border="0" width="100%">
  <tr>
    <td align="center" width="100"></td>
    <td>
      <h1 align="center"><font color="#202020">比较指令</font></h1>
    </td>
    <td align="center" width="100"></td>
</table>
<ul>
  <li><a href="#cmn">CMN</a></li>
  <li><a href="#cmp">CMP</a></li>
  <li><a href="#teq">TEQ</a></li>
  <li><a href="#tst">TST</a></li>
</ul>
<p><a href="ARMinstrs.html#Data">指令格式</a></p>
<p>译注：CMP 和 CMP 是算术指令，TEQ 和 TST 
是逻辑指令。把它们归入一类的原因是它们的 S 
位总是设置的，就是说，它们总是影响标志位。</p>
<p><a name="cmn"></a></p>
<h2>CMN : 比较取负的值</h2>
<p>(<font color="#0000FF">C</font>o<font color="#0000FF">m</font>pare <font color="#0000FF">N</font>egative)</p>
<pre>
  CMN{条件}{P}  &lt;op 1&gt;, &lt;op 2&gt;

                status = op_1 - (- op_2)
</pre>
<code>CMN</code> 同于 <code>CMP</code>，但它允许你与小负值(操作数 
2 的取负的值)进行比较，比如难于用其他方法实现的用于结束列表的 
-1。这样与 -1 比较将使用:
<pre>
  CMN     R0, #1                  ; 把 R0 与 -1 进行比较
</pre>
详情参照 <code>CMP</code> 指令。
<p>　
<p><a name="cmp"></a></p>
<h2>CMP : 比较</h2>
<p>(<font color="#0000FF">C</font>o<font color="#0000FF">mp</font>are)</p>
<pre>
 CMP{条件}{P}  &lt;op 1&gt;, &lt;op 2&gt;

                status = op_1 - op_2
</pre>
<code>CMP</code> 
允许把一个寄存器的内容如另一个寄存器的内容或立即值进行比较，更改状态标志来允许进行条件执行。它进行一次减法，但不存储结果，而是正确的更改标志。标志表示的是操作数 
1 比操作数 2 如何(大小等)。如果操作数 1 大于操作操作数 2，则此后的有 
GT 后缀的指令将可以执行。<br>
明显的，你不需要显式的指定 <code>S</code> 
后缀来更改状态标志... 如果你指定了它则被忽略。
<p>　
<p><a name="teq"></a></p>
<h2>TEQ : 测试等价</h2>
<p>(<font color="#0000FF">T</font>est <font color="#0000FF">Eq</font>uivalence)</p>
<pre>
  TEQ{条件}{P}  &lt;op 1&gt;, &lt;op 2&gt;

                Status = op_1 EOR op_2
</pre>
<code>TEQ</code> 类似于 <code>TST</code>。区别是这里的概念上的计算是 
EOR 而不是 AND。这提供了一种查看两个操作数是否相同而又不影响进位标志(不象 
<code>CMP </code>那样)的方法。加上 <code>P</code> 后缀的 <code>TEQ</code> 
还可用于改变 R15 中的标志(在 26-bit 模式中)。详情请参照 <a href="psr.html">psr.html</a>，在 
32-bit 模式下如何做请参见<a href="psr.html#32bit">这里</a>。
<p>　
<p><a name="tst"></a></p>
<h2>TST : 测试位</h2>
<p>(<font color="#0000FF">T</font>e<font color="#0000FF">st</font> bits)</p>
<pre>
  TST{条件}{P}  &lt;op 1&gt;, &lt;op 2&gt;

                Status = op_1 AND op_2
</pre>
<code>TST</code> 类似于 <code>CMP</code>，不产生放置到目的寄存器中的结果。而是在给出的两个操作数上进行操作并把结果反映到状态标志上。使用 
<code>TST</code> 来检查是否设置了特定的位。操作数 1 
是要测试的数据字而操作数 2 
是一个位掩码。经过测试后，如果匹配则设置 Zero 
标志，否则清除它。象 <code>CMP</code><code> </code>那样，你不需要指定 
<code>S</code> 后缀。
<pre>
  TST     R0, #%1                 ; 测试在 R0 中是否设置了位 0。 
</pre>
<p>&nbsp;
<hr size="3">
<a href="index.html">回到目录页</a>

</body>

</html>
